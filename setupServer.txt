
sudo journalctl -xe ?? idk helped debug something
curl http://35.87.6.139
curl https://www.api.whetherweather.org
??
sudo firewall-cmd --permanent --zone=public --add-service=http
sudo firewall-cmd --reload
sudo systemctl enable nginx
sudo systemctl start nginx
sudo nginx -t
??


NGINX:
sudo yum install nginx -y -> sudo amazon-linux-extras install nginx1.12 -> sudo apt install nginx
"need to get ssl certificate working
sudo nano /etc/nginx/conf.d/flaskserver.conf
        server {
            listen 80;
            server_name 35.87.6.139;

            location / {
                proxy_pass http://unix:/home/ec2-user/HWBT/src/flask/flaskserver.sock;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-Proto $scheme;
            }
        }


sudo systemctl start nginx
sudo systemctl status nginx

GUNICORN:
pip install gunicorn
error log: sudo nano /var/log/nginx/error.log
daemon reload?? -> sudo systemctl daemon-reload

    sudo chmod g+x /home/ec2-user
    sudo chmod 766 /home/ec2-user/HWBT/src/flask/flaskserver.sock ->these two lines set permissions -> can i do it without
    namei -l /home/ec2-user/HWBT/src/flask/flaskserver.sock ?? - >gets permissions


sudo nano /etc/systemd/system/flaskserver.service
        [Unit]
        Description=Gunicorn instance to serve flaskserver
        After=network.target

        [Service]
        User=ec2-user
        Group=nginx
        WorkingDirectory=/home/ec2-user/HWBT/src/flask
        Environment="PATH=/home/ec2-user/HWBT/src/flask/venv/bin"
        ExecStart=/home/ec2-user/HWBT/src/flask/venv/bin/gunicorn --workers 4 --bind unix:/home/ec2-user/HWBT/src/flask/flaskserver.sock --log-level error --error-logfile /var/log/gunicorn/gunicorn_error.log


        [Install]
        WantedBy=multi-user.target

sudo systemctl restart flaskserver
sudo systemctl status flaskserver


CERTBOT:
might need:
    sudo amazon-linux-extras enable epel
    sudo yum clean metadata



pip3 install certbot certbot-nginx
which certbot
pip install 'urllib3<2'
sudo ~/HWBT/src/flask/venv/bin/certbot --nginx
